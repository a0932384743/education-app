(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1214:function(t,e,n){"use strict";n.r(e);var r=n(358),o=n(886),l=n(876),c=n(867),d=n(1199),v=n(1198),m=n(492),f=n(1052),h=n(422),_=n(505),k=n(865),x=n(174),D=n(870),y=n(233),C=(n(84),n(455),n(35),n(22),n(877)),w=n.n(C),$=n(1089),M={name:"AbnormalEventRecord",layout:"admin-layout",data:function(){return{items:$,startDateMenu:!1,endDateMenu:!1,isEventEnded:!1,level:"",category:"",categories:["EdgeDevicesPing","ConnectorTraffic","InternationalCircuitV4Ping"],levels:["MN","CR"],startDate:w()("2024-06-01").format("YYYY-MM-DD"),endDate:w()("2024-06-30").format("YYYY-MM-DD")}},computed:{headers:function(){return[{text:this.$t("id"),value:"id",width:80},{text:this.$t("event.id"),value:"eventId"},{text:this.$t("event.category"),value:"category"},{text:this.$t("level"),value:"level"},{text:this.$t("event.start.time"),value:"startTime"},{text:this.$t("event.end.time"),value:"endTime"},{text:this.$t("event.duration"),value:"duration"},{text:this.$t("event.device"),value:"device"},{text:this.$t("event.description"),value:"desc",width:300},{text:this.$t("work.processing"),value:"operate",width:100}]}},mounted:function(){this.items=$},methods:{onSearchEvents:function(){var t=this;this.items=$.filter((function(e){return(!t.startDate||w()(e.startTime).isAfter(w()(t.startDate).startOf("days")))&&(!t.category||e.category===t.category)&&(!t.level||e.level===t.level)&&(t.isEventEnded&&e.endTime||!t.isEventEnded&&w()(e.endTime||new Date).isBefore(w()(t.endDate).endOf("days")))}))},setRowClass:function(t){return"".concat(t.endTime?"":"error"," lighten-2")},goToWorkOrderAdd:function(t){this.$router.push("/work-order-management/add/".concat(t.id))},goToWorkOrderList:function(t){this.$router.push("/work-order-management/".concat(t.id))}}},E=n(136),component=Object(E.a)(M,(function(){var t=this,e=t._self._c;return e(k.a,[e(c.a,{staticClass:"text-center"},[e(o.a,[e(l.c,[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("condition.search")))])]),t._v(" "),e(m.a),t._v(" "),e(l.b,[e(f.a,{staticClass:"px-5"},[e(k.a,{staticClass:"my-0"},[e(c.a,{staticClass:"pt-1",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(_.a,{ref:"startDateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:t.$t("start.time"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.startDateMenu,callback:function(e){t.startDateMenu=e},expression:"startDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.startDateMenu=!1}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),t._v(" "),e(c.a,{staticClass:"pt-1",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(_.a,{ref:"endDateMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(n){var r=n.on,o=n.attrs;return[e(y.a,t._g(t._b({attrs:{label:t.$t("end.time"),"prepend-icon":"mdi-calendar",readonly:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.endDateMenu,callback:function(e){t.endDateMenu=e},expression:"endDateMenu"}},[t._v(" "),e(v.a,{on:{input:function(e){t.endDateMenu=!1}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1),t._v(" "),e(c.a,{staticClass:"pt-1",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(x.a,{attrs:{items:t.categories,label:t.$t("event.category")},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1),t._v(" "),e(c.a,{staticClass:"pt-1",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(x.a,{attrs:{items:t.levels,label:t.$t("event.level")},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}})],1),t._v(" "),e(c.a,{staticClass:"pt-1",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[e(D.a,{staticClass:"mt-0",attrs:{label:t.$t("event.is.closed")},model:{value:t.isEventEnded,callback:function(e){t.isEventEnded=e},expression:"isEventEnded"}})],1)],1)],1)],1),t._v(" "),e(l.a,{staticClass:"justify-end"},[e(r.a,{attrs:{color:"primary"},on:{click:t.onSearchEvents}},[t._v(t._s(t.$t("search")))])],1)],1)],1),t._v(" "),e(c.a,{attrs:{cols:12}},[e("table-card",{attrs:{title:"日誌記錄",items:t.items},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.search,l=n.footerProps,c=n.itemPerPage,v=n.page,m=n.items,f=n.headerProps;return[e(d.a,{attrs:{headers:t.headers,items:m,search:o,page:v,"items-per-page":c,"footer-props":l,"header-props":f,"fixed-header":"","hide-default-footer":"",height:"500px","item-class":t.setRowClass},scopedSlots:t._u([{key:"item.eventId",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v(t._s((null==r?void 0:r.eventId)||"-"))])]}},{key:"item.level",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v(t._s((null==r?void 0:r.level)||"-"))])]}},{key:"item.startTime",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v(t._s((null==r?void 0:r.startTime)||"-"))])]}},{key:"item.endTime",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v("\n              "+t._s((null==r?void 0:r.endTime)||t.$t("continued"))+"\n            ")])]}},{key:"item.device",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v(t._s(null==r?void 0:r.device))])]}},{key:"item.duration",fn:function(n){var r=n.item;return[e("div",{staticClass:"text-no-wrap"},[t._v(t._s(null==r?void 0:r.duration))])]}},{key:"item.operate",fn:function(n){var o=n.item;return[e("div",{staticClass:"d-inline-flex",staticStyle:{gap:"0.8rem"}},["CR"===o.level?e(r.a,{attrs:{small:"",color:"info"},on:{click:function(e){return t.goToWorkOrderList(o)}}},[e(h.a,{attrs:{size:"20"}},[t._v("mdi-magnify")]),t._v(" "),e("span",{staticClass:"d-none d-sm-inline-block"},[t._v(t._s(t.$t("work.search")))])],1):t._e(),t._v(" "),"MN"===o.level?e(r.a,{attrs:{small:"",color:"success"},on:{click:function(e){return t.goToWorkOrderAdd(o)}}},[e(h.a,{staticClass:"white--text",attrs:{size:"20"}},[t._v("mdi-plus")]),e("span",{staticClass:"d-none d-sm-inline-block white--text"},[t._v(t._s(t.$t("work.add")))])],1):t._e()],1)]}}],null,!0)})]}}])})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TableCard:n(879).default})}}]);